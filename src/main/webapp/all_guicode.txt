<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%
    if (session == null || (session.getAttribute("student") == null && session.getAttribute("admin") == null)) {
        response.sendRedirect(request.getContextPath() + "/login");
        return;
    }
    String userType = (String) session.getAttribute("userType");
%>
<!DOCTYPE html>
<html>
<head>
    <title>Dashboard - Canteen Management</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <style>
        body {
            background-color: #f5f5f5;
            padding-bottom: 30px;
        }
        .navbar {
            background-color: #337ab7;
            border: none;
            border-radius: 0;
            margin-bottom: 30px;
        }
        .navbar-brand {
            color: white !important;
            font-weight: bold;
        }
        .navbar-nav > li > a {
            color: white !important;
            padding: 15px 20px;
        }
        .navbar-nav > li > a:hover {
            background-color: #286090 !important;
        }
        .navbar-nav > .active > a {
            background-color: #286090 !important;
        }
        .dashboard-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .header {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        .header h2 {
            color: #333;
            margin: 0;
            font-size: 24px;
        }
        .user-info {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 6px;
            margin-bottom: 30px;
        }
        .user-info p {
            margin-bottom: 10px;
            color: #555;
        }
        .user-info strong {
            color: #333;
        }
        .footer-actions {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        .welcome-icon {
            color: #337ab7;
            margin-right: 10px;
        }
        .navbar-right {
            margin-right: 15px;
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-default">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">Canteen Management</a>
            </div>

            <div class="collapse navbar-collapse" id="navbar">
                <% if (userType.equals("admin")) { %>
                    <ul class="nav navbar-nav">
                        <li><a href="${pageContext.request.contextPath}/students?command=LIST">
                            <span class="glyphicon glyphicon-user"></span> Manage Students
                        </a></li>
                        <li>
                            <a href="#" onclick="openMenuView()">
                                <span class="glyphicon glyphicon-cutlery"></span> View Menu
                            </a>
                        </li>
                        <li>
                        	<a href="${pageContext.request.contextPath}/prices?command=VIEW">
                            	<span class="glyphicon glyphicon-cog"></span> Configure Prices
                        	</a>
                        </li>
                        <li>
                        	<a href="${pageContext.request.contextPath}/students?command=VIEW-STUDENT-TICKETS">
                            	<span class="glyphicon glyphicon-signal"></span> Student Tickets
                        	</a>
                        </li>
                    </ul>
                <% } else { %>
                    <ul class="nav navbar-nav">
                        <li>
                            <a href="#" onclick="openMenuView()">
                                <span class="glyphicon glyphicon-cutlery"></span> View Menu
                            </a>
                        </li>
                        <li>
	                        <a href="${pageContext.request.contextPath}/payment?command=VIEW">
	                            <span class="glyphicon glyphicon-credit-card"></span> My Payments
	                        </a>
                        </li>
                        <li>
	                        <a href="${pageContext.request.contextPath}/payment?command=VIEW-PAID-TICKET">
	                            <span class="glyphicon glyphicon-credit-card"></span> My Tickets
	                        </a>
                        </li>
                    </ul>
                <% } %>
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="${pageContext.request.contextPath}/logout">
                        <span class="glyphicon glyphicon-log-out"></span> Logout
                    </a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="dashboard-container">
        <div class="header">
            <% if (userType.equals("admin")) { %>
                <h2><span class="glyphicon glyphicon-user welcome-icon"></span>Welcome, Administrator</h2>
            <% } else { %>
                <h2><span class="glyphicon glyphicon-user welcome-icon"></span>Welcome, ${student.firstName} ${student.lastName}</h2>
            <% } %>
        </div>

        <div class="user-info">
            <% if (userType.equals("admin")) { %>
                <p><strong><span class="glyphicon glyphicon-envelope"></span> Email:</strong> ${admin.adminEmail}</p>
                <p><strong><span class="glyphicon glyphicon-briefcase"></span> Role:</strong> Administrator</p>
            <% } else { %>
                <p><strong><span class="glyphicon glyphicon-envelope"></span> Email:</strong> ${student.email}</p>
                <p><strong><span class="glyphicon glyphicon-education"></span> Class:</strong> ${student.studentClass}</p>
            <% } %>
        </div>
    </div>

    <script>
        function getThisWeekMonday() {
            let d = new Date();
            while (d.getDay() !== 1) { // 1 = Monday
                d.setDate(d.getDate() - 1);
            }
            return d;
        }

        function openMenuView() {
            const thisMonday = getThisWeekMonday().toISOString().split('T')[0];
            window.location.href = '${pageContext.request.contextPath}/menu?command=VIEW&weekStart=' + thisMonday;
        }
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</body>
</html><% 
    response.sendRedirect(request.getContextPath() + "/login"); 
%>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canteen Management - Login</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <style>
        body {
            background-color: #f2f2f2;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        .login-container {
            background-color: #fff;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
            width: 400px;
            text-align: center;
        }
        .login-container h2 {
            margin-bottom: 20px;
            font-weight: bold;
        }
        .form-control {
            margin-bottom: 15px;
        }
        .checkbox {
            margin-bottom: 20px;
        }
        .alert-danger {
            margin-top: 15px;
        }
        .login-btn {
            width: 100%;
        }
    </style>
</head>
<body>
    <div class="login-container">
        <h2>Your Canteen</h2>
        <form action="${pageContext.request.contextPath}/login" method="post">
            <div class="form-group">
                <input type="email" name="email" class="form-control" placeholder="Email" required>
            </div>
            <div class="form-group">
                <input type="password" name="password" class="form-control" placeholder="Password" required>
            </div>
            <button type="submit" class="btn btn-primary login-btn">Login</button>
        </form>
        <div class="alert alert-danger" style="display: ${error != null ? 'block' : 'none'};">
            <strong>${error}</strong>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</body>
</html>
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>
<!DOCTYPE html>
<html>
<head>
    <title>Payment - Canteen Management</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <style>
        .payment-container { padding: 20px; }
        .ticket-list { margin-bottom: 20px; }
        .payment-summary { background: #f9f9f9; padding: 15px; border-radius: 4px; }
        .alert { margin-bottom: 20px; }
    </style>
</head>
<body>
    <div class="container payment-container">
        <!-- Add notification section -->
        <c:if test="${not empty sessionScope.PAYMENT_MESSAGE}">
            <div class="alert alert-${sessionScope.PAYMENT_STATUS} alert-dismissible fade in">
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                ${sessionScope.PAYMENT_MESSAGE}
            </div>
            <%-- Clear the message after displaying --%>
            <% session.removeAttribute("PAYMENT_MESSAGE");
               session.removeAttribute("PAYMENT_STATUS"); %>
        </c:if>

        <h2>Payment</h2>
        
        <form id="paymentForm" action="payment" method="POST">
            <input type="hidden" name="command" value="PROCESS">
            
            <div class="ticket-list">
                <h3>Paid Tickets</h3>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Type</th>
                            <th>Price</th>
                        </tr>
                    </thead>
                    <tbody>
                        <c:forEach items="${paidTickets}" var="ticket">
                            <tr>
                                <td><fmt:formatDate value="${ticket.ticketDate}" pattern="MM/dd/yyyy"/></td>
                                <td>${ticket.ticketType}</td>
                                <td>$<fmt:formatNumber value="${ticket.price}" pattern="#,##0.00"/></td>
                            </tr>
                        </c:forEach>
                    </tbody>
                </table>
            </div>
            
           
        </form>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script>
        $(document).ready(function() {
            // Auto hide alert after 5 seconds
            setTimeout(function() {
                $('.alert').fadeOut('slow');
            }, 5000);
        });
    </script>
</body>
</html>
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>
<!DOCTYPE html>
<html>
<head>
    <title>Payment - Canteen Management</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <style>
        .payment-container { padding: 20px; }
        .ticket-list { margin-bottom: 20px; }
        .payment-summary { background: #f9f9f9; padding: 15px; border-radius: 4px; }
        .alert { margin-bottom: 20px; }
    </style>
</head>
<body>
    <div class="container payment-container">
        <!-- Add notification section -->
        <c:if test="${not empty sessionScope.PAYMENT_MESSAGE}">
            <div class="alert alert-${sessionScope.PAYMENT_STATUS} alert-dismissible fade in">
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                ${sessionScope.PAYMENT_MESSAGE}
            </div>
            <%-- Clear the message after displaying --%>
            <% session.removeAttribute("PAYMENT_MESSAGE");
               session.removeAttribute("PAYMENT_STATUS"); %>
        </c:if>

        <h2>Payment</h2>
        
        <form id="paymentForm" action="payment" method="POST">
            <input type="hidden" name="command" value="PROCESS">
            
            <div class="ticket-list">
                <h3>Unpaid Tickets</h3>
                <table class="table">
                    <thead>
                        <tr>
                            <th><input type="checkbox" id="selectAll"></th>
                            <th>Date</th>
                            <th>Type</th>
                            <th>Price</th>
                        </tr>
                    </thead>
                    <tbody>
                        <c:forEach items="${unpaidTickets}" var="ticket">
                            <tr>
                                <td>
                                    <input type="checkbox" name="ticketIds" value="${ticket.id}" 
                                           data-price="${ticket.price}" class="ticket-checkbox">
                                </td>
                                <td><fmt:formatDate value="${ticket.ticketDate}" pattern="MM/dd/yyyy"/></td>
                                <td>${ticket.ticketType}</td>
                                <td>$<fmt:formatNumber value="${ticket.price}" pattern="#,##0.00"/></td>
                            </tr>
                        </c:forEach>
                    </tbody>
                </table>
            </div>
            
            <div class="payment-summary">
                <h4>Payment Summary</h4>
                <p>Total Amount: $<span id="totalAmount">0.00</span></p>
                <button type="submit" class="btn btn-primary" id="payButton" disabled>
                    Pay Selected Tickets
                </button>
            </div>
        </form>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script>
        $(document).ready(function() {
            // Auto hide alert after 5 seconds
            setTimeout(function() {
                $('.alert').fadeOut('slow');
            }, 5000);

            function updateTotal() {
                var total = 0;
                $('.ticket-checkbox:checked').each(function() {
                    total += parseFloat($(this).data('price'));
                });
                $('#totalAmount').text(total.toFixed(2));
                $('#payButton').prop('disabled', total === 0);
            }

            $('#selectAll').change(function() {
                $('.ticket-checkbox').prop('checked', $(this).is(':checked'));
                updateTotal();
            });

            $('.ticket-checkbox').change(function() {
                updateTotal();
            });
        });
    </script>
</body>
</html>
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>
<!DOCTYPE html>
<html>
<head>
    <title>Payment - Canteen Management</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <style>
        .payment-container { padding: 20px; }
        .ticket-list { margin-bottom: 20px; }
        .payment-summary { background: #f9f9f9; padding: 15px; border-radius: 4px; }
        .alert { margin-bottom: 20px; }
    </style>
</head>
<body>
    <div class="container payment-container">
        <!-- Add notification section -->
        <c:if test="${not empty sessionScope.PAYMENT_MESSAGE}">
            <div class="alert alert-${sessionScope.PAYMENT_STATUS} alert-dismissible fade in">
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                ${sessionScope.PAYMENT_MESSAGE}
            </div>
            <%-- Clear the message after displaying --%>
            <% session.removeAttribute("PAYMENT_MESSAGE");
               session.removeAttribute("PAYMENT_STATUS"); %>
        </c:if>

        <h2>Payment</h2>
        
        <form id="paymentForm" action="payment" method="POST">
            <input type="hidden" name="command" value="PROCESS">
            
            <div class="ticket-list">
                <h3>Student Tickets</h3>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Student Name</th>
                            <th>Date</th>
                            <th>Type</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <c:forEach items="${studentTickets}" var="ticket">
                            <tr>
                                <td>${ticket.studentName}</td>
                                <td><fmt:formatDate value="${ticket.ticketDate}" pattern="MM/dd/yyyy"/></td>
                                <td>${ticket.ticketType}</td>
                                <c:if test="${ticket.paid}">
							         <td style="color: green;">Paid</td>
							     </c:if>
							     <c:if test="${!ticket.paid}">
							         <td style="color: red;">Unpaid</td>
							     </c:if>
                            </tr>
                        </c:forEach>
                    </tbody>
                </table>
            </div>
            
           
        </form>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script>
        $(document).ready(function() {
            // Auto hide alert after 5 seconds
            setTimeout(function() {
                $('.alert').fadeOut('slow');
            }, 5000);
        });
    </script>
</body>
</html>
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>

<!DOCTYPE html>
<html>
<head>
    <title>Weekly Menu - Canteen Management</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="${pageContext.request.contextPath}/css/menu-styles.css">
</head>
<body>
    <div class="menu-container">
        <!-- Notification Alert -->
        <c:if test="${not empty sessionScope.NOTIFICATION_MESSAGE}">
            <div class="alert alert-${sessionScope.NOTIFICATION_TYPE} alert-dismissible fade in">
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                ${sessionScope.NOTIFICATION_MESSAGE}
            </div>
            <% session.removeAttribute("NOTIFICATION_MESSAGE");
               session.removeAttribute("NOTIFICATION_TYPE"); %>
        </c:if>

        <!-- Header Section -->
        <div class="menu-header">
            <h2>Weekly Menu</h2>
            
            <!-- Week Navigation -->
            <div class="week-navigation">
                <button type="button" class="btn btn-default" onclick="changeDisplayWeek(-1)">
                    <span class="glyphicon glyphicon-chevron-left"></span> Previous Week
                </button>
                <span id="currentWeekDisplay" class="week-display mx-3">
                    <!-- Remove the fmt:formatDate tags and let JavaScript handle the display -->
                    <!-- Will be populated by JavaScript -->
                </span>
                <button type="button" class="btn btn-default" onclick="changeDisplayWeek(1)">
                    Next Week <span class="glyphicon glyphicon-chevron-right"></span>
                </button>
                <input type="hidden" id="currentWeekStart" name="currentWeekStart" 
                       value="${currentWeekStartStr}">
            </div>

            <c:if test="${userType eq 'admin'}">
                <div class="admin-controls">
                    <button type="button" class="btn btn-success" onclick="showWeekSelector()">
                        <span class="glyphicon glyphicon-calendar"></span> Generate Weekly Menu
                    </button>
                    <button type="button" class="btn btn-primary" onclick="createMenu()">
                        <span class="glyphicon glyphicon-plus"></span> Add Single Menu
                    </button>
                </div>
            </c:if>
        </div>

        <!-- Menu Grid -->
        <jsp:include page="/includes/menu-grid.jsp" />

        <!-- Ticket Section -->
        <c:if test="${userType eq 'student'}">
            <div class="ticket-section">
                <h3>Get Your Meal Ticket</h3>
                <button class="btn btn-primary ticket-button" data-toggle="modal" data-target="#snackModal">
                    <span class="glyphicon glyphicon-tag"></span> Get Snack Ticket
                </button>
                <button class="btn btn-success ticket-button" data-toggle="modal" data-target="#lunchModal">
                    <span class="glyphicon glyphicon-tag"></span> Get Lunch Ticket
                </button>
            </div>
        </c:if>

        <!-- Back to Dashboard -->
        <div class="text-center" style="margin-top: 20px;">
            <a href="${pageContext.request.contextPath}/dashboard.jsp" class="btn btn-default">
                <span class="glyphicon glyphicon-chevron-left"></span> Back to Dashboard
            </a>
        </div>
    </div>

    <!-- Include Modals -->
    <jsp:include page="/includes/menu-modals.jsp" />

    <!-- Scripts -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src="${pageContext.request.contextPath}/js/menu-functions.js"></script>
    
    <!-- Initialize page -->
    <script>
        $(document).ready(function() {
       
            // Initialize modals
            $('.modal').modal({
                show: false,
                backdrop: 'static'
            });
            
            // Check if we need to show modal after verification
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('command') === 'CHECK_WEEK' && 
                !document.querySelector('.alert-warning')) {
                $('#weekSelectorModal').modal('show');
            }
        
        });
    </script>
</body>
</html><%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%
    if (session == null || session.getAttribute("admin") == null) {
        response.sendRedirect(request.getContextPath() + "/login");
        return;
    }
%>
<!DOCTYPE html>
<html>
<head>
    <title>Student Management</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <style>
        .top-actions { margin: 20px 0; }
        .search-box { margin-bottom: 20px; }
        .modal-header { 
            background-color: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }
        .modal-footer {
            background-color: #f8f9fa;
            border-top: 1px solid #dee2e6;
        }
        .btn-action { margin: 0 2px; }
        .table th { background-color: #f8f9fa; }
    </style>
</head>
<body>
    <div class="container">
        <h2>Student Management</h2>
        
        <div class="top-actions">
            <div class="row">
                <div class="col-md-6">
                    <button type="button" class="btn btn-primary" onclick="openAddModal()">
                        <span class="glyphicon glyphicon-plus"></span> Add New Student
                    </button>
                </div>
                <div class="col-md-6">
                    <div class="search-box">
                        <div class="input-group">
                            <input type="text" class="form-control" id="searchInput" 
                                   placeholder="Search students..." onkeyup="searchStudents()">
                            <span class="input-group-btn">
                                <button class="btn btn-default" type="button">
                                    <span class="glyphicon glyphicon-search"></span>
                                </button>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="table-responsive">
            <table class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Email</th>
                        <th>Class</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <c:forEach var="student" items="${student_list}">
                        <tr>
                            <td>${student.studentId}</td>
                            <td>${student.firstName}</td>
                            <td>${student.lastName}</td>
                            <td>${student.email}</td>
                            <td>${student.studentClass}</td>
                            <td>
                                <a href="${pageContext.request.contextPath}/students?command=VIEW&studentId=${student.studentId}" 
                                   class="btn btn-info btn-sm btn-action">
                                    <span class="glyphicon glyphicon-eye-open"></span> View
                                </a>
                                <button onclick="openUpdateModal(
                                    '${student.studentId}', 
                                    '${student.firstName}', 
                                    '${student.lastName}', 
                                    '${student.email}', 
                                    '${student.studentClass}')" 
                                    class="btn btn-primary btn-sm btn-action">
                                    <span class="glyphicon glyphicon-edit"></span> Edit
                                </button>
                                <button onclick="confirmDelete('${student.studentId}')"
                                   class="btn btn-danger btn-sm btn-action">
                                    <span class="glyphicon glyphicon-trash"></span> Delete
                                </button>
                            </td>
                        </tr>
                    </c:forEach>
                </tbody>
            </table>
        </div>
        
        <!-- Student Modal for Add/Update -->
        <div class="modal fade" id="studentModal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" 
                                onclick="closeModal()">&times;</button>
                        <h4 class="modal-title" id="modalTitle">Add New Student</h4>
                    </div>
                    <div class="modal-body">
                        <form id="studentForm" onsubmit="handleFormSubmit(event)">
                            <input type="hidden" name="command" id="formCommand" value="ADD">
                            <input type="hidden" name="studentId" id="studentId">
                            <div class="form-group">
                                <label>First Name:</label>
                                <input type="text" name="firstName" id="firstName" 
                                       class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label>Last Name:</label>
                                <input type="text" name="lastName" id="lastName" 
                                       class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label>Email:</label>
                                <input type="email" name="email" id="email" 
                                       class="form-control" required>
                            </div>
                            <div class="form-group password-group">
                                <label>Password:</label>
                                <input type="password" name="password" id="password" 
                                       class="form-control">
                                <small class="text-muted">Leave empty for updates</small>
                            </div>
                            <div class="form-group">
                                <label>Class:</label>
                                <input type="text" name="studentClass" id="studentClass" 
                                       class="form-control" required>
                            </div>
                            <div class="modal-footer">
                                <button type="submit" class="btn btn-primary" 
                                        id="modalSubmitBtn">Add Student</button>
                                <button type="button" class="btn btn-default" 
                                        onclick="closeModal()">Cancel</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <div class="mt-3">
            <a href="${pageContext.request.contextPath}/dashboard.jsp" class="btn btn-default">
                <span class="glyphicon glyphicon-chevron-left"></span> Back to Dashboard
            </a>
        </div>
    </div>

    <script>
        // Modal management
        const modal = document.getElementById('studentModal');
        const studentForm = document.getElementById('studentForm');

        function openModal() {
            modal.style.display = 'block';
            modal.classList.add('in');
            document.body.classList.add('modal-open');
        }

        function closeModal() {
            modal.style.display = 'none';
            modal.classList.remove('in');
            document.body.classList.remove('modal-open');
            studentForm.reset();
        }

        function openAddModal() {
            document.getElementById('modalTitle').textContent = 'Add New Student';
            document.getElementById('formCommand').value = 'ADD';
            document.getElementById('modalSubmitBtn').textContent = 'Add Student';
            document.querySelector('.password-group').style.display = 'block';
            document.getElementById('password').required = true;
            studentForm.reset();
            openModal();
        }

        function openUpdateModal(id, firstName, lastName, email, studentClass) {
            document.getElementById('modalTitle').textContent = 'Update Student';
            document.getElementById('formCommand').value = 'UPDATE';
            document.getElementById('modalSubmitBtn').textContent = 'Update Student';
            
            document.getElementById('studentId').value = id;
            document.getElementById('firstName').value = firstName;
            document.getElementById('lastName').value = lastName;
            document.getElementById('email').value = email;
            document.getElementById('studentClass').value = studentClass;
            
            document.querySelector('.password-group').style.display = 'none';
            document.getElementById('password').required = false;
            document.getElementById('password').value = '';
            
            openModal();
        }

        // Form handling
        function handleFormSubmit(event) {
            event.preventDefault();
            
            if (!validateForm()) {
                return false;
            }

            const formData = new FormData(studentForm);
            const data = new URLSearchParams(formData);

            fetch('${pageContext.request.contextPath}/students', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: data
            })
            .then(response => {
                if (response.ok) {
                    closeModal();
                    window.location.reload();
                } else {
                    throw new Error('Network response was not ok');
                }
            })
            .catch(error => {
                alert('Error: ' + error.message);
            });
        }

        // Form validation
        function validateForm() {
            const email = document.getElementById('email').value;
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            
            if (!emailRegex.test(email)) {
                alert('Please enter a valid email address');
                return false;
            }

            const formCommand = document.getElementById('formCommand').value;
            const password = document.getElementById('password').value;
            if (formCommand === 'ADD' && !password) {
                alert('Password is required for new students');
                return false;
            }

            return true;
        }

        // Delete confirmation
        function confirmDelete(studentId) {
            if (confirm('Are you sure you want to delete this student?')) {
                window.location.href = '${pageContext.request.contextPath}/students?command=DELETE&studentId=' + studentId;
            }
        }

        // Search functionality
        function searchStudents() {
            const searchInput = document.getElementById('searchInput');
            const filter = searchInput.value.toLowerCase();
            const tbody = document.querySelector('table tbody');
            const rows = tbody.getElementsByTagName('tr');

            for (let row of rows) {
                const text = row.textContent || row.innerText;
                row.style.display = text.toLowerCase().includes(filter) ? '' : 'none';
            }
        }
    </script>
</body>
</html><%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>
<fmt:setLocale value="en_US"/>
<!DOCTYPE html>
<html>
<head>
    <title>Edit Menu - Canteen Management</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <style>
        .container { padding-top: 20px; padding-bottom: 20px; }
        .form-group { margin-bottom: 20px; }
        .btn { margin-right: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h2>Edit Menu for <fmt:formatDate value="${MENU_TO_EDIT.menuDate}" pattern="EEEE, MMM dd, yyyy"/></h2>
                <hr>
                
                <form action="${pageContext.request.contextPath}/menu" method="POST" class="form-horizontal">
                    <input type="hidden" name="command" value="UPDATE">
                    <input type="hidden" name="menuId" value="${MENU_TO_EDIT.dailyMenuId}">
                    
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Date:</label>
                        <div class="col-sm-4">
                            <input type="date" name="menuDate" value="${MENU_TO_EDIT.menuDate}" class="form-control" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label">Morning Snack:</label>
                        <div class="col-sm-4">
                            <select name="snackId" class="form-control" required>
                                <c:forEach var="snack" items="${snacksList}">
                                    <option value="${snack.id}" ${MENU_TO_EDIT.snack.id eq snack.id ? 'selected' : ''}>
                                        ${snack.name}
                                    </option>
                                </c:forEach>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label">Appetizer:</label>
                        <div class="col-sm-4">
                            <select name="appetizerId" class="form-control" required>
                                <c:forEach var="appetizer" items="${appetizersList}">
                                    <option value="${appetizer.id}" ${MENU_TO_EDIT.appetizer.id eq appetizer.id ? 'selected' : ''}>
                                        ${appetizer.name}
                                    </option>
                                </c:forEach>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label">Vegetable:</label>
                        <div class="col-sm-4">
                            <select name="vegetableId" class="form-control" required>
                                <c:forEach var="vegetable" items="${vegetablesList}">
                                    <option value="${vegetable.id}" ${MENU_TO_EDIT.vegetable.id eq vegetable.id ? 'selected' : ''}>
                                        ${vegetable.name}
                                    </option>
                                </c:forEach>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label">Protein:</label>
                        <div class="col-sm-4">
                            <select name="proteinId" class="form-control" required>
                                <c:forEach var="protein" items="${proteinsList}">
                                    <option value="${protein.id}" ${MENU_TO_EDIT.protein.id eq protein.id ? 'selected' : ''}>
                                        ${protein.name} (${protein.type})
                                    </option>
                                </c:forEach>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label">Carbohydrate:</label>
                        <div class="col-sm-4">
                            <select name="carbId" class="form-control" required>
                                <c:forEach var="carb" items="${carbsList}">
                                    <option value="${carb.id}" ${MENU_TO_EDIT.carb.id eq carb.id ? 'selected' : ''}>
                                        ${carb.name}
                                    </option>
                                </c:forEach>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label">Dessert:</label>
                        <div class="col-sm-4">
                            <select name="dessertId" class="form-control" required>
                                <c:forEach var="dessert" items="${dessertsList}">
                                    <option value="${dessert.id}" ${MENU_TO_EDIT.dessert.id eq dessert.id ? 'selected' : ''}>
                                        ${dessert.name}
                                    </option>
                                </c:forEach>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <div class="col-sm-offset-2 col-sm-10">
                            <button type="submit" class="btn btn-primary">
                                <span class="glyphicon glyphicon-save"></span> Save Changes
                            </button>
                            <a href="${pageContext.request.contextPath}/menu?command=VIEW" class="btn btn-default">
                                <span class="glyphicon glyphicon-remove"></span> Cancel
                            </a>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</body>
</html>
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%
    if (session == null || session.getAttribute("admin") == null) {
        response.sendRedirect(request.getContextPath() + "/login");
        return;
    }
%>
<!DOCTYPE html>
<html>
<head>
    <title>Student Management</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <style>
        .top-actions { margin: 20px 0; }
        .search-box { margin-bottom: 20px; }
        .modal-header { 
            background-color: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }
        .modal-footer {
            background-color: #f8f9fa;
            border-top: 1px solid #dee2e6;
        }
        .btn-action { margin: 0 2px; }
        .table th { background-color: #f8f9fa; }
    </style>
</head>
<body>
    <div class="container">
        <h2>Student Management</h2>
        
        <div class="top-actions">
            <div class="row">
                <div class="col-md-6">
                    <button type="button" class="btn btn-primary" onclick="openAddModal()">
                        <span class="glyphicon glyphicon-plus"></span> Add New Student
                    </button>
                </div>
                <div class="col-md-6">
                    <div class="search-box">
                        <div class="input-group">
                            <input type="text" class="form-control" id="searchInput" 
                                   placeholder="Search students..." onkeyup="searchStudents()">
                            <span class="input-group-btn">
                                <button class="btn btn-default" type="button">
                                    <span class="glyphicon glyphicon-search"></span>
                                </button>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="table-responsive">
            <table class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Email</th>
                        <th>Class</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <c:forEach var="student" items="${student_list}">
                        <tr>
                            <td>${student.studentId}</td>
                            <td>${student.firstName}</td>
                            <td>${student.lastName}</td>
                            <td>${student.email}</td>
                            <td>${student.studentClass}</td>
                            <td>
                                <a href="${pageContext.request.contextPath}/students?command=VIEW&studentId=${student.studentId}" 
                                   class="btn btn-info btn-sm btn-action">
                                    <span class="glyphicon glyphicon-eye-open"></span> View
                                </a>
                                <button onclick="openUpdateModal(
                                    '${student.studentId}', 
                                    '${student.firstName}', 
                                    '${student.lastName}', 
                                    '${student.email}', 
                                    '${student.studentClass}')" 
                                    class="btn btn-primary btn-sm btn-action">
                                    <span class="glyphicon glyphicon-edit"></span> Edit
                                </button>
                                <button onclick="confirmDelete('${student.studentId}')"
                                   class="btn btn-danger btn-sm btn-action">
                                    <span class="glyphicon glyphicon-trash"></span> Delete
                                </button>
                            </td>
                        </tr>
                    </c:forEach>
                </tbody>
            </table>
        </div>
        
        <div class="modal fade" id="studentModal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" 
                                onclick="closeModal()">&times;</button>
                        <h4 class="modal-title" id="modalTitle">Add New Student</h4>
                    </div>
                    <div class="modal-body">
                        <form id="studentForm" onsubmit="handleFormSubmit(event)">
                            <input type="hidden" name="command" id="formCommand" value="ADD">
                            <input type="hidden" name="studentId" id="studentId">
                            <div class="form-group">
                                <label>First Name:</label>
                                <input type="text" name="firstName" id="firstName" 
                                       class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label>Last Name:</label>
                                <input type="text" name="lastName" id="lastName" 
                                       class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label>Email:</label>
                                <input type="email" name="email" id="email" 
                                       class="form-control" required>
                            </div>
                            <div class="form-group password-group">
                                <label>Password:</label>
                                <input type="password" name="password" id="password" 
                                       class="form-control">
                                <small class="text-muted">Leave empty for updates</small>
                            </div>
                            <div class="form-group">
                                <label>Class:</label>
                                <input type="text" name="studentClass" id="studentClass" 
                                       class="form-control" required>
                            </div>
                            <div class="modal-footer">
                                <button type="submit" class="btn btn-primary" 
                                        id="modalSubmitBtn">Add Student</button>
                                <button type="button" class="btn btn-default" 
                                        onclick="closeModal()">Cancel</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <div class="mt-3">
            <a href="${pageContext.request.contextPath}/dashboard.jsp" class="btn btn-default">
                <span class="glyphicon glyphicon-chevron-left"></span> Back to Dashboard
            </a>
        </div>
    </div>

    <script>
        const modal = document.getElementById('studentModal');
        const studentForm = document.getElementById('studentForm');

        function openModal() {
            modal.style.display = 'block';
            modal.classList.add('in');
            document.body.classList.add('modal-open');
        }

        function closeModal() {
            modal.style.display = 'none';
            modal.classList.remove('in');
            document.body.classList.remove('modal-open');
            studentForm.reset();
        }

        function openAddModal() {
            document.getElementById('modalTitle').textContent = 'Add New Student';
            document.getElementById('formCommand').value = 'ADD';
            document.getElementById('modalSubmitBtn').textContent = 'Add Student';
            document.querySelector('.password-group').style.display = 'block';
            document.getElementById('password').required = true;
            studentForm.reset();
            openModal();
        }

        function openUpdateModal(id, firstName, lastName, email, studentClass) {
            document.getElementById('modalTitle').textContent = 'Update Student';
            document.getElementById('formCommand').value = 'UPDATE';
            document.getElementById('modalSubmitBtn').textContent = 'Update Student';
            
            document.getElementById('studentId').value = id;
            document.getElementById('firstName').value = firstName;
            document.getElementById('lastName').value = lastName;
            document.getElementById('email').value = email;
            document.getElementById('studentClass').value = studentClass;
            
            document.querySelector('.password-group').style.display = 'none';
            document.getElementById('password').required = false;
            document.getElementById('password').value = '';
            
            openModal();
        }

        function handleFormSubmit(event) {
            event.preventDefault();
            
            if (!validateForm()) {
                return false;
            }

            const formData = new FormData(studentForm);
            const data = new URLSearchParams(formData);

            fetch('${pageContext.request.contextPath}/students', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: data
            })
            .then(response => {
                if (response.ok) {
                    closeModal();
                    window.location.reload();
                } else {
                    throw new Error('Network response was not ok');
                }
            })
            .catch(error => {
                alert('Error: ' + error.message);
            });
        }

        function validateForm() {
            const email = document.getElementById('email').value;
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            
            if (!emailRegex.test(email)) {
                alert('Please enter a valid email address');
                return false;
            }

            const formCommand = document.getElementById('formCommand').value;
            const password = document.getElementById('password').value;
            if (formCommand === 'ADD' && !password) {
                alert('Password is required for new students');
                return false;
            }

            return true;
        }

        function confirmDelete(studentId) {
            if (confirm('Are you sure you want to delete this student?')) {
                window.location.href = '${pageContext.request.contextPath}/students?command=DELETE&studentId=' + studentId;
            }
        }

        function searchStudents() {
            const searchInput = document.getElementById('searchInput');
            const filter = searchInput.value.toLowerCase();
            const tbody = document.querySelector('table tbody');
            const rows = tbody.getElementsByTagName('tr');

            for (let row of rows) {
                const text = row.textContent || row.innerText;
                row.style.display = text.toLowerCase().includes(filter) ? '' : 'none';
            }
        }
    </script>
</body>
</html><%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>
<!DOCTYPE html>
<html>
<head>
    <title>Price Configuration - Canteen Management</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
</head>
<body>
    <div class="container">
        <h2>Meal Price Configuration</h2>
        
        <c:if test="${not empty sessionScope.PRICE_MESSAGE}">
            <div class="alert alert-${sessionScope.PRICE_STATUS} alert-dismissible">
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                ${sessionScope.PRICE_MESSAGE}
            </div>
            <% session.removeAttribute("PRICE_MESSAGE");
               session.removeAttribute("PRICE_STATUS"); %>
        </c:if>

        <div class="text-left" style="margin-bottom: 20px;">
            <a href="${pageContext.request.contextPath}/dashboard.jsp" class="btn btn-default">
                <span class="glyphicon glyphicon-chevron-left"></span> Back to Dashboard
            </a>
        </div>

        <div class="panel panel-default">
            <div class="panel-heading">Current Prices</div>
            <div class="panel-body">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Meal Type</th>
                            <th>Price</th>
                            <th>Last Updated</th>
                        </tr>
                    </thead>
                    <tbody>
                        <c:forEach items="${currentPrices}" var="price">
                            <tr>
                                <td>${price.mealType}</td>
                                <td>$<fmt:formatNumber value="${price.price}" pattern="#,##0.00"/></td>
                                <td><fmt:formatDate value="${price.effectiveDateTime}" pattern="MM/dd/yyyy HH:mm:ss"/></td>
                            </tr>
                        </c:forEach>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="panel panel-primary">
            <div class="panel-heading">Set New Price</div>
            <div class="panel-body">
                <form action="${pageContext.request.contextPath}/prices" method="POST" class="form-horizontal">
                    <input type="hidden" name="command" value="UPDATE">
                    
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Meal Type:</label>
                        <div class="col-sm-4">
                            <select name="mealType" class="form-control" required>
                                <option value="LUNCH">Lunch</option>
                                <option value="SNACK">Snack</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label">New Price:</label>
                        <div class="col-sm-4">
                            <input type="number" name="price" step="0.01" min="0" class="form-control" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="col-sm-offset-2 col-sm-4">
                            <button type="submit" class="btn btn-primary">
                                <span class="glyphicon glyphicon-save"></span> Update Price Now
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <div class="panel panel-default">
            <div class="panel-heading">Price History</div>
            <div class="panel-body">
                <ul class="nav nav-tabs">
                    <li class="active"><a data-toggle="tab" href="#lunchHistory">Lunch History</a></li>
                    <li><a data-toggle="tab" href="#snackHistory">Snack History</a></li>
                </ul>

                <div class="tab-content" style="padding-top: 20px;">
                    <div id="lunchHistory" class="tab-pane fade in active">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Price</th>
                                    <th>Effective From</th>
                                </tr>
                            </thead>
                            <tbody>
                                <c:forEach items="${priceHistory.LUNCH}" var="price">
                                    <tr>
                                        <td>$<fmt:formatNumber value="${price.price}" pattern="#,##0.00"/></td>
                                        <td><fmt:formatDate value="${price.effectiveDateTime}" pattern="MM/dd/yyyy HH:mm:ss"/></td>
                                    </tr>
                                </c:forEach>
                            </tbody>
                        </table>
                    </div>
                    <div id="snackHistory" class="tab-pane fade">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Price</th>
                                    <th>Effective From</th>
                                </tr>
                            </thead>
                            <tbody>
                                <c:forEach items="${priceHistory.SNACK}" var="price">
                                    <tr>
                                        <td>$<fmt:formatNumber value="${price.price}" pattern="#,##0.00"/></td>
                                        <td><fmt:formatDate value="${price.effectiveDateTime}" pattern="MM/dd/yyyy HH:mm:ss"/></td>
                                    </tr>
                                </c:forEach>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</body>
</html>
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
    <title>Student Details</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <style>
        .detail-card {
            margin-top: 20px;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .actions {
            margin-top: 20px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .spinner {
            display: inline-block;
            animation: spin 1s linear infinite;
        }
        .hidden {
            display: none;
        }
        .modal-header {
            background-color: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }
        .modal-footer {
            background-color: #f8f9fa;
            border-top: 1px solid #dee2e6;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="row">
            <div class="col-md-8 col-md-offset-2">
                <div class="detail-card">
                    <h2>Student Details</h2>
                    <hr>
                    <div class="row">
                        <div class="col-md-6">
                            <p><strong>Student ID:</strong> ${student.studentId}</p>
                            <p><strong>First Name:</strong> ${student.firstName}</p>
                            <p><strong>Last Name:</strong> ${student.lastName}</p>
                        </div>
                        <div class="col-md-6">
                            <p><strong>Email:</strong> ${student.email}</p>
                            <p><strong>Class:</strong> ${student.studentClass}</p>
                        </div>
                    </div>
                    <div class="actions">
                        <button onclick="openUpdateModal('${student.studentId}', '${student.firstName}', 
                                '${student.lastName}', '${student.email}', '${student.studentClass}')" 
                                class="btn btn-primary">Edit</button>
                        <a href="students?command=LIST" class="btn btn-default">Back to List</a>
                        <button onclick="confirmDelete('${student.studentId}')"
                                class="btn btn-danger">Delete</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Student Edit Modal -->
    <div class="modal fade" id="studentModal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Update Student</h4>
                </div>
                <div class="modal-body">
                    <form id="studentForm">
                        <input type="hidden" name="command" id="formCommand" value="UPDATE">
                        <input type="hidden" name="studentId" id="studentId">
                        <div class="form-group">
                            <label>First Name:</label>
                            <input type="text" name="firstName" id="firstName" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label>Last Name:</label>
                            <input type="text" name="lastName" id="lastName" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label>Email:</label>
                            <input type="email" name="email" id="email" class="form-control" required>
                        </div>
                        <div class="form-group password-group">
                            <label>Password:</label>
                            <input type="password" name="password" id="password" class="form-control">
                            <small class="text-muted">Leave empty to keep current password</small>
                        </div>
                        <div class="form-group">
                            <label>Class:</label>
                            <input type="text" name="studentClass" id="studentClass" class="form-control" required>
                        </div>
                        <div class="modal-footer">
                            <button type="submit" class="btn btn-primary" id="modalSubmitBtn">
                                <span class="button-text">Update Student</span>
                                <span class="glyphicon glyphicon-refresh spinner hidden"></span>
                            </button>
                            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script>
        const studentForm = document.getElementById('studentForm');
        const modalSubmitBtn = document.getElementById('modalSubmitBtn');
        const studentModal = document.getElementById('studentModal');

        document.addEventListener('DOMContentLoaded', function() {
            studentForm.addEventListener('submit', handleFormSubmit);

            const closeButtons = document.querySelectorAll('[data-dismiss="modal"]');
            closeButtons.forEach(button => {
                button.addEventListener('click', () => {
                    hideModal();
                });
            });
        });

        async function handleFormSubmit(e) {
            e.preventDefault();
            
            if (!validateForm()) {
                return;
            }

            const formData = new FormData(studentForm);
            const queryString = new URLSearchParams(formData).toString();
            
            setLoadingState(true);

            try {
                const response = await fetch('students?' + queryString, {
                    method: 'POST'
                });

                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }

                hideModal();
                window.location.reload();
            } catch (error) {
                alert('Error submitting form: ' + error.message);
                setLoadingState(false);
            }
        }

        function validateForm() {
            const email = document.getElementById('email').value;
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            
            if (!emailRegex.test(email)) {
                alert('Please enter a valid email address');
                return false;
            }

            return true;
        }

        function openUpdateModal(id, firstName, lastName, email, studentClass) {
            document.getElementById('studentId').value = id;
            document.getElementById('firstName').value = firstName;
            document.getElementById('lastName').value = lastName;
            document.getElementById('email').value = email;
            document.getElementById('studentClass').value = studentClass;
            
            document.getElementById('password').required = false;
            document.getElementById('password').value = '';
            
            showModal();
        }

        function showModal() {
            studentModal.classList.add('in');
            studentModal.style.display = 'block';
            document.body.classList.add('modal-open');
            
            const backdrop = document.createElement('div');
            backdrop.className = 'modal-backdrop fade in';
            document.body.appendChild(backdrop);
        }

        function hideModal() {
            studentModal.classList.remove('in');
            studentModal.style.display = 'none';
            document.body.classList.remove('modal-open');
            
            const backdrop = document.querySelector('.modal-backdrop');
            if (backdrop) {
                backdrop.remove();
            }
        }

        function confirmDelete(studentId) {
            if (confirm('Are you sure you want to delete this student?')) {
                window.location.href = 'students?command=DELETE&studentId=' + studentId;
            }
        }

        function setLoadingState(isLoading) {
            const buttonText = modalSubmitBtn.querySelector('.button-text');
            const spinner = modalSubmitBtn.querySelector('.spinner');
            
            modalSubmitBtn.disabled = isLoading;
            buttonText.style.display = isLoading ? 'none' : '';
            spinner.classList.toggle('hidden', !isLoading);
        }
    </script>
</body>
</html>/* Alert Styles */
.alert {
    margin: 20px auto;
    max-width: 90%;
    border-radius: 4px;
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 1050;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

/* Container and Layout */
.menu-container {
    padding: 20px;
    max-width: 1400px;
    margin: 0 auto;
    position: relative;
}

.menu-header {
    text-align: center;
    margin-bottom: 30px;
    position: relative;
}

.menu-header h2 {
    color: #333;
    font-weight: bold;
    margin-bottom: 20px;
}

/* Admin Controls */
.admin-controls {
    background: #f8f9fa;
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 20px;
    display: flex;
    justify-content: center;
    gap: 15px;
    flex-wrap: wrap;
}

/* Navigation Styles */
.menu-navigation {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 20px 0;
    padding: 10px;
    background: #f8f9fa;
    border-radius: 8px;
}

.nav-button {
    padding: 8px 15px;
    border: none;
    background: #337ab7;
    color: white;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.3s;
}

.nav-button:hover {
    background: #286090;
}

.nav-button:disabled {
    background: #cccccc;
    cursor: not-allowed;
}

.menu-week-display {
    font-size: 18px;
    font-weight: bold;
    color: #333;
    padding: 0 15px;
}

/* Menu Cards Grid */
.menu-cards-wrapper {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    margin: 0 -10px;
    justify-content: center;
}

.menu-card {
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    margin-bottom: 20px;
    overflow: hidden;
    flex: 1;
    min-width: 300px;
    max-width: calc(25% - 20px);
    transition: transform 0.3s ease;
}

.menu-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
}

/* Menu Card Content */
.menu-day {
    background: #337ab7;
    color: white;
    padding: 15px;
    text-align: center;
    font-weight: bold;
}

.menu-content {
    padding: 15px;
}

.menu-item {
    margin-bottom: 10px;
    padding: 8px;
    border-bottom: 1px solid #eee;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.menu-item:last-child {
    border-bottom: none;
    margin-bottom: 0;
}

.menu-category {
    font-weight: bold;
    color: #666;
    min-width: 100px;
}

/* Modal Styles */
.week-selector-modal .modal-body {
    padding: 20px;
}

.week-navigation {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 15px;
    margin-bottom: 20px;
    padding: 10px;
    background: #f8f9fa;
    border-radius: 8px;
}

.week-preview {
    background: #f8f9fa;
    padding: 15px;
    border-radius: 8px;
    margin-top: 20px;
}

.week-preview ul li {
    padding: 10px;
    border-bottom: 1px solid #dee2e6;
    display: flex;
    align-items: center;
    gap: 10px;
}

.week-preview ul li:last-child {
    border-bottom: none;
}

/* Ticket Section */
.ticket-section {
    margin-top: 30px;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 8px;
    text-align: center;
}

.ticket-button {
    margin: 10px;
    padding: 10px 30px;
    font-size: 16px;
}

.modal-ticket {
    padding: 20px;
}

/* Utility Classes */
.loading {
    opacity: 0.6;
    pointer-events: none;
}

.label-info {
    font-size: 11px;
    margin-left: 5px;
    padding: 2px 5px;
}

/* Week Navigation Styles */
.week-navigation {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px;
    margin: 20px 0;
    padding: 15px;
    background: #f8f9fa;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.week-navigation button {
    padding: 8px 16px;
    font-size: 14px;
    border: 1px solid #ddd;
    transition: all 0.3s ease;
}

.week-navigation button:disabled {
    background-color: #f5f5f5;
    border-color: #ddd;
    color: #999;
    cursor: not-allowed;
}

.week-navigation button:not(:disabled):hover {
    background-color: #e9ecef;
    border-color: #ced4da;
}

.week-display {
    font-size: 16px;
    font-weight: 600;
    color: #495057;
    min-width: 200px;
    text-align: center;
}

/* Responsive adjustments for week navigation */
@media (max-width: 768px) {
    .week-navigation {
        flex-direction: column;
        gap: 10px;
        padding: 10px;
    }

    .week-display {
        order: -1;
        margin-bottom: 10px;
    }

    .week-navigation button {
        width: 100%;
    }
}

/* Responsive Design */
@media (max-width: 1200px) {
    .menu-card {
        max-width: calc(33.333% - 20px);
    }
}

@media (max-width: 992px) {
    .menu-card {
        max-width: calc(50% - 20px);
    }
}

@media (max-width: 768px) {
    .menu-card {
        max-width: 100%;
    }

    .admin-controls {
        flex-direction: column;
    }

    .menu-navigation {
        flex-direction: column;
        gap: 10px;
    }
    
    .menu-week-display {
        margin: 10px 0;
    }
}

/* Empty Menu Styles */
.empty-menu {
    background: #f8f9fa;
    border: 2px dashed #dee2e6;
}

.empty-menu-message {
    text-align: center;
    color: #6c757d;
    padding: 20px;
    font-style: italic;
}

.menu-grid {
    text-align: center;
    margin: 0 auto;
}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src="${pageContext.request.contextPath}/js/menu-scripts.js"></script>
</body>
</html>
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>
<!DOCTYPE html>
<html>
<head>
    <title>${param.title} - Canteen Management</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="${pageContext.request.contextPath}/css/menu-styles.css">
</head>
<body>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>

<div class="menu-cards-wrapper">
    <c:forEach items="${weeklyMenu}" var="menu">
        <div class="menu-card ${empty menu.snack ? 'empty-menu' : ''}">
            <div class="menu-day">
                <fmt:formatDate value="${menu.menuDate}" pattern="EEEE" />
                <br>
                <small>
                    <fmt:formatDate value="${menu.menuDate}" pattern="MMM dd, yyyy" />
                </small>
                <c:if test="${userType eq 'admin'}">
                    <div style="margin-top: 10px;">
                        <c:choose>
                            <c:when test="${empty menu.snack}">
                                <button onclick="createMenu('${menu.menuDate}')" class="btn btn-success btn-sm">
                                    <span class="glyphicon glyphicon-plus"></span> Add Menu
                                </button>
                            </c:when>
                            <c:otherwise>
                                <button onclick="editMenu(${menu.dailyMenuId})" class="btn btn-primary btn-sm">
                                    <span class="glyphicon glyphicon-edit"></span> Edit
                                </button>
                            </c:otherwise>
                        </c:choose>
                    </div>
                </c:if>
            </div>
            <div class="menu-content">
                <c:choose>
                    <c:when test="${empty menu.snack}">
                        <div class="empty-menu-message">
                            No menu planned for this day
                        </div>
                    </c:when>
                    <c:otherwise>
                        <div class="menu-item">
                            <span class="menu-category">Morning Snack:</span>
                            <span>${menu.snack.name}</span>
                        </div>
                        <div class="menu-item">
                            <span class="menu-category">Appetizer:</span>
                            <span>${menu.appetizer.name}</span>
                        </div>
                        <div class="menu-item">
                            <span class="menu-category">Vegetable:</span>
                            <span>${menu.vegetable.name}</span>
                        </div>
                        <div class="menu-item">
                            <span class="menu-category">Protein:</span>
                            <span class="menu-value">
                                ${menu.protein.name}
                                <span class="label label-info">${menu.protein.type}</span>
                            </span>
                        </div>
                        <div class="menu-item">
                            <span class="menu-category">Carbs:</span>
                            <span>${menu.carb.name}</span>
                        </div>
                        <div class="menu-item">
                            <span class="menu-category">Dessert:</span>
                            <span>${menu.dessert.name}</span>
                        </div>
                    </c:otherwise>
                </c:choose>
            </div>
        </div>
    </c:forEach>
</div>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>

<!-- Week Selector Modal -->
<div class="modal fade" id="weekSelectorModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Generate Weekly Menu</h4>
            </div>
            <div class="modal-body">
                <form id="weekSelectorForm" action="menu" method="POST" onsubmit="return validateSelectedWeekStart();">
                    <input type="hidden" name="command" value="GENERATE_WEEK">
                    <input type="hidden" name="selectedWeekStart" id="selectedWeekStart">
                    
                    <div class="week-navigation text-center mb-3">
                        <button type="button" class="btn btn-default" onclick="changeWeek(-1)">
                            <span class="glyphicon glyphicon-chevron-left"></span>
                        </button>
                        <span id="weekDisplay" class="mx-3">
                            <!-- Will be populated by JavaScript -->
                        </span>
                        <button type="button" class="btn btn-default" onclick="changeWeek(1)">
                            <span class="glyphicon glyphicon-chevron-right"></span>
                        </button>
                    </div>

                    <div class="week-preview">
                        <h5>Menu will be generated for:</h5>
                        <ul id="weekDaysList" class="list-unstyled"></ul>
                    </div>

                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary">Generate Menu</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Create/Edit Menu Modal -->
<div class="modal fade" id="menuModal" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title" id="menuModalTitle">Create New Menu</h4>
            </div>
            <div class="modal-body">
                <form id="menuForm" action="menu" method="POST">
                    <input type="hidden" name="command" id="menuCommand" value="CREATE">
                    <input type="hidden" name="menuId" id="menuId">

                    <div class="form-group">
                        <label>Date:</label>
                        <input type="date" name="menuDate" id="menuDate" class="form-control" required>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Snack:</label>
                                <select name="snackId" class="form-control" required>
                                    <option value="">Select Snack</option>
                                    <c:forEach items="${snacksList}" var="snack">
                                        <option value="${snack.id}">${snack.name}</option>
                                    </c:forEach>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Appetizer:</label>
                                <select name="appetizerId" class="form-control" required>
                                    <option value="">Select Appetizer</option>
                                    <c:forEach items="${appetizersList}" var="appetizer">
                                        <option value="${appetizer.id}">${appetizer.name}</option>
                                    </c:forEach>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Vegetable:</label>
                                <select name="vegetableId" class="form-control" required>
                                    <option value="">Select Vegetable</option>
                                    <c:forEach items="${vegetablesList}" var="vegetable">
                                        <option value="${vegetable.id}">${vegetable.name}</option>
                                    </c:forEach>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Protein:</label>
                                <select name="proteinId" class="form-control" required>
                                    <option value="">Select Protein</option>
                                    <c:forEach items="${proteinsList}" var="protein">
                                        <option value="${protein.id}">${protein.name} (${protein.type})</option>
                                    </c:forEach>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Carbohydrate:</label>
                                <select name="carbId" class="form-control" required>
                                    <option value="">Select Carbohydrate</option>
                                    <c:forEach items="${carbsList}" var="carb">
                                        <option value="${carb.id}">${carb.name}</option>
                                    </c:forEach>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Dessert:</label>
                                <select name="dessertId" class="form-control" required>
                                    <option value="">Select Dessert</option>
                                    <c:forEach items="${dessertsList}" var="dessert">
                                        <option value="${dessert.id}">${dessert.name}</option>
                                    </c:forEach>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary">Save Menu</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Snack Ticket Modal -->
<div class="modal fade" id="snackModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Get Snack Ticket</h4>
            </div>
            <div class="modal-body">
                <form action="${pageContext.request.contextPath}/ticket" method="POST">
                    <input type="hidden" name="command" value="GENERATE">
                    <input type="hidden" name="ticketType" value="SNACK">
                    <input type="hidden" name="studentId" value="${sessionScope.student.studentId}">
                    <input type="hidden" name="menuDate" id="snackMenuDate">
                    
                    <div class="form-group">
                        <label>Select Date:</label>
                        <select name="menuId" class="form-control menu-date-select" required>
                            <c:forEach items="${weeklyMenu}" var="menu">
                                <option value="${menu.dailyMenuId}" data-date="${menu.menuDate}">
                                    <fmt:formatDate value="${menu.menuDate}" pattern="EEEE, MMM dd, yyyy"/>
                                </option>
                            </c:forEach>
                        </select>
                    </div>

                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary">Generate Ticket</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Lunch Ticket Modal -->
<div class="modal fade" id="lunchModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Get Lunch Ticket</h4>
            </div>
            <div class="modal-body">
                <form action="${pageContext.request.contextPath}/ticket" method="POST">
                    <input type="hidden" name="command" value="GENERATE">
                    <input type="hidden" name="ticketType" value="LUNCH">
                    <input type="hidden" name="studentId" value="${sessionScope.student.studentId}">
                    <input type="hidden" name="menuDate" id="lunchMenuDate">
                    
                    <div class="form-group">
                        <label>Select Date:</label>
                        <select name="menuId" class="form-control menu-date-select" required>
                            <c:forEach items="${weeklyMenu}" var="menu">
                                <option value="${menu.dailyMenuId}" data-date="${menu.menuDate}">
                                    <fmt:formatDate value="${menu.menuDate}" pattern="EEEE, MMM dd, yyyy"/>
                                </option>
                            </c:forEach>
                        </select>
                    </div>

                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary">Generate Ticket</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<Context>
	<Resource 
		name="jdbc/canteen"
		auth="Container" type="javax.sql.DataSource"
		username="root" password="123456"
		driverClassName="com.mysql.jdbc.Driver"
		url="jdbc:mysql://localhost:3306/canteen"
		maxActive="20" maxIdle="5" maxWait="10000"
	/>
</Context>


<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Canteen Management </title>
</head>
<body>

</body>
</html><!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Canteen Management </title>
</head>
<body>

</body>
</html><?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://xmlns.jcp.org/xml/ns/javaee" xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd" id="WebApp_ID" version="4.0">
  <display-name>CanteenManagement</display-name>
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>
  <servlet>
    <servlet-name>LoginController</servlet-name>
    <servlet-class>canteen.demo.controller.LoginController</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>LoginController</servlet-name>
    <url-pattern>/login</url-pattern>
  </servlet-mapping>


    <servlet>
    <servlet-name>TicketController</servlet-name>
    <servlet-class>canteen.demo.controller.TicketController</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>TicketController</servlet-name>
    <url-pattern>/ticket</url-pattern>
  </servlet-mapping>


<servlet>
    <servlet-name>MenuController</servlet-name>
    <servlet-class>canteen.demo.controller.MenuController</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>MenuController</servlet-name>
    <url-pattern>/menu</url-pattern>
</servlet-mapping>

<servlet>
    <servlet-name>LogoutController</servlet-name>
    <servlet-class>canteen.demo.controller.LogoutController</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>LogoutController</servlet-name>
    <url-pattern>/logout</url-pattern>
</servlet-mapping>

<servlet>
    <servlet-name>StudentController</servlet-name>
    <servlet-class>canteen.demo.controller.StudentController</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>StudentController</servlet-name>
    <url-pattern>/students</url-pattern>
</servlet-mapping>

<servlet>
    <servlet-name>PaymentController</servlet-name>
    <servlet-class>canteen.demo.controller.PaymentController</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>PaymentController</servlet-name>
    <url-pattern>/payment</url-pattern>
</servlet-mapping>

<servlet>
    <servlet-name>PriceController</servlet-name>
    <servlet-class>canteen.demo.controller.PriceController</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>PriceController</servlet-name>
    <url-pattern>/prices</url-pattern>
</servlet-mapping>
</web-app>